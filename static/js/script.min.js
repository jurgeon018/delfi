function hero_form(e){if(e.length>0){var t=window.location.origin+"/set_params/",s={direction:e[0].dataset.value},i=e[0],a=e[0].querySelector(".form__element_calendar_hero");$.ajax({url:t,type:"POST",data:s,async:!0,success:function(t){data_update(i,".cites_departure",t.cities,!1),data_update(i,".cites_arrival",t.cities,!1);$(a).datepicker({minDate:new Date,dateFormat:"yyyy-mm-dd",autoClose:!0,onRenderCell:function(e,s){if("day"==s&&$.inArray(formatDate(e),t.dates)<0)return{disabled:!0}}});$(e[0].querySelector(".datepicker_icon")).on("click",function(e){$(a).data("datepicker");$(a).datepicker("widget").is(":visible")?$(a).datepicker("hide"):$(a).datepicker("show")})}}),$(e[0].querySelector(".datepicker_icon")).on("click",function(e){var t=$(a).data("datepicker");!0===$(t.$datepicker)[0].classList.contains("active")?t.hide():t.show()}),$(e[0].querySelector(".btn-hero-form")).on("click",function(t){t.preventDefault();var s=$(e[0].querySelector("form")).serializeArray();for(var i in s){if(0==s[i].value)e[0].querySelector("form").querySelector("."+s[i].name).classList.add("form__group_error");else if(window.sessionStorage)for(var i in s)s.hasOwnProperty(i)&&sessionStorage.setItem(s[i].name,s[i].value),sessionStorage.setItem("direction_hero_form",e[0].dataset.value);0!=s[0].value&&0!=s[1].value&&0!=s[2].value&&(sessionStorage.setItem("buton_send_hero_form","send"),location.href="/order/")}})}}function data_update(e,t,s,i,a=!1){var n=e.querySelector(t).querySelector(".select__wrap"),o=document.createDocumentFragment();for(var r in s){var c=document.createElement("div");c.classList.add("select__wrap_item"),c.dataset.id=s[r],c.innerHTML=s[r],s[r]==a&&(console.log($(n).parents(".input-tickets__grops")),$(n).siblings(".field").children(".field_text").each(function(){$(this).text(s[r])}),c.classList.add("select__wrap_item"),$(n).siblings(".field").children("input").each(function(){$(this).val(s[r])})),o.appendChild(c)}for(;$(n)[0].firstChild;)$(n)[0].removeChild($(n)[0].firstChild);".flights__time"===t&&($(n).siblings(".field").children(".field_text").each(function(){$(this).text("")}),$(n).siblings(".field").children("input").each(function(){$(this).val("")})),$(n)[0].appendChild(o),!0===i?forEach(n.querySelectorAll(".select__wrap_item"),function(s,i){$(i).on("click",function(){if(!$(this).hasClass("select__wrap_item-disabled")){$(this).parents(".input-tickets__box-sites").length>0&&(forEach($(this).parents(".input-tickets__box-sites").find(".data_arrival").find(".select__wrap .select__wrap_item"),function(e,t){t.classList.remove("select__wrap_item-disabled")}),$(this).parents(".input-tickets__grops").hasClass("data_departure")&&$(this).parents(".input-tickets__box-sites").find(".data_arrival").find(".select__wrap").find(`[data-id="${$(this).data("id")}"]`).addClass("select__wrap_item-disabled")),$(this).parents(".input-tickets__box-sites").length>0&&(forEach($(this).parents(".input-tickets__box-sites").find(".data_departure").find(".select__wrap .select__wrap_item"),function(e,t){t.classList.remove("select__wrap_item-disabled")}),$(this).parents(".input-tickets__grops").hasClass("data_arrival")&&$(this).parents(".input-tickets__box-sites").find(".data_departure").find(".select__wrap").find(`[data-id="${$(this).data("id")}"]`).addClass("select__wrap_item-disabled"));var s=$(this).text(),i=$(this).data("id"),a=$(this).parents(".select").find(".field_text "),n=$(this).parents(".select").find("input");$(a).text(s),$(n).val(i),$(".select__wrap").removeClass("select__wrap-active"),$(".field").removeClass("field-active")}active_bus(e),clear_order(t)})}):$(".select__wrap_item").on("click",function(){if(!$(this).hasClass("select__wrap_item-disabled")){$(this).parents(".input-tickets__box-sites").length>0&&(forEach($(this).parents(".input-tickets__box-sites").find(".data_arrival").find(".select__wrap .select__wrap_item"),function(e,t){t.classList.remove("select__wrap_item-disabled")}),$(this).parents(".input-tickets__grops").hasClass("data_departure")&&$(this).parents(".input-tickets__box-sites").find(".data_arrival").find(".select__wrap").find(`[data-id="${$(this).data("id")}"]`).addClass("select__wrap_item-disabled")),$(this).parents(".input-tickets__box-sites").length>0&&(forEach($(this).parents(".input-tickets__box-sites").find(".data_departure").find(".select__wrap .select__wrap_item"),function(e,t){t.classList.remove("select__wrap_item-disabled")}),$(this).parents(".input-tickets__grops").hasClass("data_arrival")&&$(this).parents(".input-tickets__box-sites").find(".data_departure").find(".select__wrap").find(`[data-id="${$(this).data("id")}"]`).addClass("select__wrap_item-disabled"));var e=$(this).text(),t=$(this).data("id"),s=$(this).parents(".select").find(".field_text "),i=$(this).parents(".select").find("input");$(s).text(e),$(i).val(t),$(".select__wrap").removeClass("select__wrap-active"),$(".field").removeClass("field-active")}})}function formatDate(e){var t=new Date(e),s=""+(t.getMonth()+1),i=""+t.getDate(),a=t.getFullYear();return s.length<2&&(s="0"+s),i.length<2&&(i="0"+i),[a,s,i].join("-")}var forEach=function(e,t,s){for(var i=0;i<e.length;i++)t.call(s,i,e[i])};function _defineProperty(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}$(document).ready(function(){var e;new Blazy({offset:100});hero_form(document.getElementsByClassName("hero__form")),$(".btn_more_park").on("click",function(){event.preventDefault(),$("html,body").animate({scrollTop:$("#bus-slider_wrap").offset().top+"px"},{duration:1e3})}),$(".btn-license").on("click",function(){event.preventDefault(),$("html,body").animate({scrollTop:$(".license_block").offset().top+"px"},{duration:1e3})}),$(".scroll_our-servise").click(function(){$([document.documentElement,document.body]).animate({scrollTop:$("#our-servise").offset().top},500)}),$(".info-car-park__button_link").fancybox({openEffect:"none",closeEffect:"none",helpers:{media:{}}}),$(".input__pl-min_minus").click(function(){var e=$(this).parent().find("input"),t=parseInt(e.val())-1;return t=t<1?1:t,e.val(t),e.change(),!1}),$(".input__pl-min_plus").click(function(){var e=$(this).parent().find("input");return e.val(parseInt(e.val())+1),e.change(),!1}),$(".input__pl-min_faild").on("keyup",function(e){var t=$(this).parent().find("input"),s=parseInt(t.val());return isNaN(s)&&(s=0),t.val(s),!1}),$(".tickets__seat_help").on("click",function(){$(".tickets__description").toggleClass("tickets__description-active"),$(".tickets__disabled_seat").toggleClass("tickets__disabled_seat-description-active"),$(document).mouseup(function(e){var t=$(".tickets__description");t.is(e.target)||0!==t.has(e.target).length||($(".tickets__description").removeClass("tickets__description-active"),$(".tickets__disabled_seat").removeClass("tickets__disabled_seat-description-active"))})}),$(".tickets__description-close").on("click",function(){$(".tickets__description").removeClass("tickets__description-active"),$(".tickets__disabled_seat").removeClass("tickets__disabled_seat-description-active")}),$(".card").mouseover(function(e){$(this).addClass("cart-hover")}),$(".card").mouseout(function(e){$(this).removeClass("cart-hover")}),$(".js-hamburger").on("click",function(e){$(".js-hamburger").toggleClass("is-active"),$(".fix-box__main ").toggleClass("fix-box__main-active")}),$(".nav__menu_item-drop").on("click",function(e){e.preventDefault(),$(".nav__menu_sub").toggleClass("main-menu__sub-active")}),$(".select__intup").on("click",function(){if($(this).parents(".input-tickets__grops-disabled").length)return!1;i($(this).parents(".form__wrap").children(".form__group"),function(e,t){t.classList.remove("form__group_error")});var e,t,s=$(this).parent(".select").find(".select__wrap"),a=$(this).parent(".select").find(".field");e=s[0],t="select__wrap-active",e.className&&new RegExp("(^|\\s)"+t+"(\\s|$)").test(e.className)?($(s).toggleClass("select__wrap-active"),$(a).toggleClass("field-active")):($(".select__wrap").removeClass("select__wrap-active"),$(".field").removeClass("field-active"),$(s).addClass("select__wrap-active"),$(a).addClass("field-active")),$(document).mouseup(function(e){var t=$(this).parent(".select").find(".select__wrap");t.is(e.target)||0!==t.has(e.target).length||($(".select__wrap").removeClass("select__wrap-active"),$(".field").removeClass("field-active"))})}),$(".select__wrap_item").on("click",function(){var e=$(this).text(),t=$(this).data("id"),s=$(this).parents(".select").find(".field_text "),i=$(this).parents(".select").find("input");$(s).text(e),$(i).val(t),$(".select__wrap").removeClass("select__wrap-active"),$(".field").removeClass("field-active")}),$(".our-servise__wrap").slick({dots:!1,infinite:!1,speed:300,slidesToShow:4,slidesToScroll:1,responsive:[{breakpoint:1055,settings:{slidesToShow:3,dots:!0,slidesToScroll:1}},{breakpoint:692,settings:{slidesToShow:2,slidesToScroll:1,dots:!0}},{breakpoint:465,settings:{slidesToShow:1,slidesToScroll:1,variableWidth:!0,dots:!0}}]}),$(".customer-reviews__wrap").slick({dots:!0,infinite:!0,speed:300,slidesToShow:3,slidesToScroll:1,nextArrow:".customer-reviews_next",prevArrow:".customer-reviews_prew",responsive:[{breakpoint:1070,settings:{slidesToShow:2,slidesToScroll:1}},{breakpoint:1500,settings:{slidesToShow:3,slidesToScroll:1}},{breakpoint:665,settings:{slidesToShow:1,slidesToScroll:1}}]});var t,s,i=function(e,t,s){for(var i=0;i<e.length;i++)t.call(s,i,e[i])};function a(e){e&&i(e,function(e,t){t.onmouseleave=function(e){t.classList.remove("select-tickets-active")},t.onmouseenter=function(e){t.classList.add("select-tickets-active")}})}a(document.querySelectorAll(".input-tickets__grops:not(.input-tickets__grops-disabled) .input-tickets__main .select-tickets .select__intup ")),a(document.querySelectorAll(".input-tickets__main")),t="seat-all",s="seat-all__wrap-active",(t=document.getElementsByClassName(t))&&i(t,function(e,t){t.onmouseleave=function(e){t.classList.remove(s)},t.onmouseenter=function(e){t.classList.add(s)}}),$(".tickets__control_step-next").on("click",function(){data_all={},$($(document.getElementsByClassName("tab__box-active")).find("form").serializeArray()).each(function(e,t){data_all[t.name]=t.value});for(var e=document.querySelectorAll(".seat-all__box")[0].getElementsByClassName("seat"),t=[],s=0;s<e.length;s++)t.push(e[s].dataset.item_s);data_all.seats=t,console.log(data_all);a=window.location.origin;var a,n=document.getElementsByClassName("tab__box-active")[0],o=($(n).find(".input-tickets__box-contact").find("input"),[]),r=(a=window.location.origin,a+"/get_seats/"),c={};o=[];$($(document.getElementsByClassName("tab__box-active")).find("form").serializeArray()).each(function(e,t){c[t.name]=t.value,"seats"==t.name&&(o.push(t.value),c[t.name]=o)}),$.ajax({url:r,type:"GEt",async:!0,success:function(e){var t=e.seats_numbers;for(key in t)t[+key+1]={value:t[+key+1]};for(key in e.seats_in_order)t[e.seats_in_order[key].number].key_ssesions=e.seats_in_order[key].order_sk;var s=[];if(o.forEach(function(i,a){void 0!==t[i].key_ssesions&&t[i].key_ssesions!==e.order_sk&&s.push(i)}),s.length>0)$.fancybox.open({src:"#chesk_form_bus",type:"inline",touch:!1,autoStart:!1,padding:0,hideOnClose:!1,showCloseButton:!0,opts:{afterShow:function(e,t){var a=$(".seat-all__box"),n="Місце під номером: ";s.forEach(function(e,t){var o=document.querySelectorAll('[data-id="seat'+e+'"]');i(o,function(e,t){t.classList.add("bus-seat__disabled"),t.classList.remove("bus-seat__active")}),i(document.querySelectorAll('[data-item_s="'+e+'"]'),function(e,t){t.remove()}),i(document.querySelectorAll(".tab__box-active form")[0].querySelectorAll(".seat_bus_input"),function(t,s){s.value==e&&s.remove()}),i(document.getElementsByClassName("seat-all_count"),function(e,t){t.innerText=a[0].childElementCount}),t==s.length-1?n+=e+" ":n+=e+", "}),$(".check_seat__wrap").text(n+" зайняте")}}});else{console.log("crash");var a=document.getElementsByClassName("tab__box-active")[0],n=$(a).find(".tickets__box_seat").find("input"),r=0;i(n,function(e,t){$(t).val()||(r++,$(t).parents(".input-tickets__grops").addClass("input-tickets__grops-error"))}),$(a).find(".seat_bus_input").length<1&&(r++,$.fancybox.open({src:"#error_search",type:"inline",touch:!1,autoStart:!1,padding:0,hideOnClose:!0})),0===r&&($(".tickets__box_seat").removeClass("tickets__box_seat-active"),$(".tickets__box_contact").addClass("tickets__box_contact-active"))}}})}),document.getElementsByClassName("tickets_trip").length>0&&(document.getElementsByClassName("tickets_trip")[0].onclick=function(e){$(".input-tickets__grops").removeClass("input-tickets__grops-error")}),$(".tickets__control_step-prev").on("click",function(){$(".tickets__box_seat").addClass("tickets__box_seat-active"),$(".tickets__box_contact").removeClass("tickets__box_contact-active")}),$(".img_modal").on("click",function(e){e.preventDefault(),$.fancybox.open({src:this.href,type:"image",Width:660})}),$(".license__wrap").slick({dots:!0,infinite:!0,speed:300,slidesToShow:3,slidesToScroll:1,nextArrow:".customer-reviews_next",prevArrow:".customer-reviews_prew",responsive:[{breakpoint:1100,settings:{slidesToShow:3,slidesToScroll:1,dots:!1}},{breakpoint:850,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:480,settings:{slidesToShow:1,slidesToScroll:1}}]}),$(".bus-slider").slick((_defineProperty(e={dots:!0,infinite:!0,speed:300,slidesToShow:1,swipe:!1,slidesToScroll:1,prevArrow:!1},"dots",!1),_defineProperty(e,"nextArrow",".bus-slider-nexts"),e)),$("div[data-slide]").click(function(e){e.preventDefault();var t=$(this).data("slide");$(".bus-slider").slick("slickGoTo",t-1)}),$(".tabs-list-item").on("click",function(e){e.preventDefault(),$(this).parent().children(".tabs-list-item").removeClass("tabs-list-item-active"),$(this).parents(".tabs").children(".tabs-content").removeClass("tabs-content-active"),$(this).addClass("tabs-list-item-active"),$($(this).attr("href")).addClass("tabs-content-active");var t=$(this).parents(".bus-slider-item")[0],s=$(this).attr("href");i($(this).parents(".tabs").children(".tabs-content"),function(e,t){t.dataset.id==s&&t.classList.add("tabs-content-active")}),i(t.getElementsByClassName("bus-slider_main_content"),function(e,t){t.classList.remove("bus-slider_main_content-active"),t.dataset.id==s&&(t.classList.add("bus-slider_main_content-active"),"#two"==t.dataset.id&&$(t).slick({dots:!0,infinite:!1,speed:300,slidesToShow:1,slidesToScroll:1,centerMode:!0,arrows:!1,centerPadding:"20px",centerMargin:"0px",responsive:[{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1}},{breakpoint:380,settings:{slidesToShow:1,slidesToScroll:1,centerPadding:"0px"}}]}))})}),$(".bus-card__item").on("click",function(e){e.preventDefault(),$(".bus-card__item").removeClass("bus-card__item-active"),$(this).addClass("bus-card__item-active")}),$(".tickets__description_btn").on("click",function(){$.fancybox.open({src:"#calculate",type:"inline",touch:!1,autoStart:!1,padding:0,hideOnClose:!0})}),$(".btn_send_conditions").on("click",function(){$.fancybox.close()}),$(".tickets__disabled-icon").on("click",function(){$.fancybox.open({src:"#tickets__disabled",type:"inline",touch:!1,autoStart:!1,padding:0,hideOnClose:!0})})});
